(function(B,D){var A={$:function(E){return(typeof E=="string")?document.getElementById(E):E},offset:function(F){var G=0,E=0;while(F){G+=F.offsetLeft;E+=F.offsetTop;F=F.offsetParent}return{"left":G,"top":E}},pageX:function(E){E=A.getEvent(E);return(E.pageX)?E.pageX:E.clientX+Math.max(document.documentElement.scrollLeft,document.body.scrollLeft)},pageY:function(E){E=A.getEvent(E);return(E.pageY)?E.pageY:E.clientY+Math.max(document.documentElement.scrollTop,document.body.scrollTop)},clientX:function(E){E=A.getEvent(E);return E.clientX},clientY:function(E){E=A.getEvent(E);return E.clientY},getEvent:function(E){return E||B.event},addEvent:function(F,G,E){if(F.addEventListener){F.addEventListener(G,E,false)}else{if(F.attachEvent){F.attachEvent("on"+G,E)}else{F["on"+G]=E}}},removeEvent:function(F,G,E){if(F.removeEventListener){F.removeEventListener(G,E,false)}else{if(F.detachEvent){F.detachEvent("on"+G,E)}else{F["on"+G]=null}}},delegateEvent:function(E,F){return function(G){return F.call(E,G||B.event)}},extend:function(E,F){for(var G in F){if(E.hasOwnProperty(G)){E[G]=F[G]}}return E}};var C=function(E){this.initialize.call(this,E)};C.prototype={constructor:C,initialize:function(F){this.opts=A.extend({target:"",container:"",limit:false,limitType:"v",limitRect:{top:0,left:0,right:0,bottom:0},onDrag:function(){}},F||{});this.isDraging=false;this.offX=this.offY=this.offMarginX=this.offMarginY;this.target=A.$(this.opts.target);this.container=A.$(this.opts.container);A.addEvent(this.target,"mousedown",A.delegateEvent(this,this.dragStart));this._fMove=A.delegateEvent(this,this.dragMoving);this._fStop=A.delegateEvent(this,this.dragStop);this.opts.limit=(this.opts.limitType=="n")?false:true;if(this.opts.limit){var E=this.opts.limitRect;if(this.container.position!="relative"){this.container.position="relative"}E.left=Math.max(0,this.target.offsetLeft);E.top=Math.max(0,this.target.offsetTop);E.right=Math.max(E.left,E.left+this.container.clientWidth-this.target.offsetWidth);E.bottom=Math.max(E.top,E.top+this.container.clientHeight-this.target.offsetHeight)}},dragStart:function(E){if(this.limitType=="no"){return}this.isDraging=true;this.offX=A.pageX(E)-this.target.offsetLeft;this.offY=A.pageY(E)-this.target.offsetTop;this.offMarginX=parseInt(this.target.marginLeft)||0;this.offMarginY=parseInt(this.target.marginTop)||0;A.addEvent(document,"mousemove",this._fMove);A.addEvent(document,"mouseup",this._fStop)},dragMoving:function(H){B.getSelection?B.getSelection().removeAllRanges():document.selection.empty();var F=A.pageX(H)-this.offX;var G=A.pageY(H)-this.offY;if(this.opts.limit){var E=this.opts.limitRect;if(F<E.left){F=E.left}else{if(F>E.right){F=E.right}}if(G<E.top){G=E.top}else{if(G>E.bottom){G=E.bottom}}if(this.opts.limitType=="h"||this.opts.limitType=="in"){this.target.style.left=F-this.offMarginX+"px"}if(this.opts.limitType=="v"||this.opts.limitType=="in"){this.target.style.top=G-this.offMarginY+"px"}}else{this.target.style.left=F-this.offMarginX+"px";this.target.style.top=G-this.offMarginY+"px"}this.opts.onDrag()},dragStop:function(E){this.isDraging=false;A.removeEvent(document,"mousemove",this._fMove);A.removeEvent(document,"mouseup",this._fStop)}};if(typeof YM=="undefined"){B.YM={}}YM.addDrag=function(E){return new C(E)}})(window,undefined);