+function(b,a){b.fn.addScrollarea=function(d){var c={direction:"horizontal",scrollArea:".js-scrollarea",btnPrev:".js-btn-pre",btnNext:".js-btn-next",slideItem:".js-slide-item",mosueType:"click",selectedClass:"active",disabledClass:"disabled",lastItemClass:"last",beforeCallback:function(h,g){console.log("动画开始之前")},clickCallback:function(h,g){console.log("当前点击条目的回调函数")},afterCallback:function(h,g){console.log("动画结束之后")}};var e=b.extend(true,{},c,d||{});var f={version:"2016-10-24",author:"wuwg"};this.each(function(m,p){var l=b(this),j=l.find(e.scrollArea),q=l.find(e.btnPrev),h=l.find(e.btnNext),k=null,n=null;function g(){k=j.children();n=k.children()}g();function o(r){if(j.is(":animated")){return false}else{if(b.type(e.beforeCallback)=="function"){e.beforeCallback(n.eq(i.activeIndex),i.activeIndex)}if(r=="++"){i.activeIndex+=1}else{if(r=="--"){i.activeIndex-=1}else{i.activeIndex=r}}i.setBtnStatus();var t=[],s=0,u=false;if(e.direction=="horizontal"){n.filter(function(v){return v<i.activeIndex}).each(function(w,x){t.push(b(this).outerWidth(true));var v=b(this).outerWidth(true);s+=v;if(s>i.totalSize-i.clientSize){i.scrollDistancePrev=s-v;i.currentScrollIndex=w;s=i.totalSize-i.clientSize;u=true;return false}});if(u&&r=="--"){i.activeIndex=i.currentScrollIndex;s=i.scrollDistancePrev}i.selectItem();if(s!=j.scrollLeft()){j.animate({scrollLeft:s},e.tweenTime,function(){if(b.type(e.afterCallback)=="function"){e.afterCallback(n.eq(i.activeIndex),i.activeIndex)}})}}else{n.filter(function(v){return v<i.activeIndex}).each(function(v,x){t.push(b(this).outerWidth(true));var w=b(this).outerHeight(true);s+=w;if(s>i.totalSize-i.clientSize){i.scrollDistancePrev=s-w;i.currentScrollIndex=v;s=i.totalSize-i.clientSize;u=true;return false}});if(u&&r=="--"){i.activeIndex=i.currentScrollIndex;s=i.scrollDistancePrev}i.selectItem();if(s!=j.scrollTop()){j.animate({scrollTop:s},e.tweenTime,function(){if(b.type(e.afterCallback)=="function"){e.afterCallback(n.eq(i.activeIndex),i.activeIndex)}})}}}}var i={_this:b(this),currentScrollIndex:0,scrollDistancePrev:0,scopeIndex:m,clientSize:(e.direction=="horizontal")?j.innerWidth():j.innerHeight(),totalSize:0,totalSlideSize:n.size(),activeIndex:0,setBtnStatus:function(){if(i.activeIndex<=0){i.activeIndex=0;q.addClass(e.disabledClass);if(i.totalSlideSize==1){h.addClass(e.disabledClass)}else{if(h.hasClass(e.disabledClass)){h.removeClass(e.disabledClass)}}}else{if(i.activeIndex>=(i.totalSlideSize-1)){i.activeIndex=i.totalSlideSize-1;h.addClass(e.disabledClass)}else{if(q.hasClass(e.disabledClass)){q.removeClass(e.disabledClass)}if(h.hasClass(e.disabledClass)){h.removeClass(e.disabledClass)}}}},scrollStep:(e.step!=0)?e.step:1,init:function(){i.setContainSize();i.setBtnStatus();i.bindEvent()},selectItem:function(){n.eq(i.activeIndex).addClass(e.selectedClass).siblings().removeClass(e.selectedClass);e.clickCallback(n.eq(i.activeIndex),i.activeIndex)},add:function(){var t=0;for(var s=0,r=arguments.length;s<r;s++){t+=arguments[s]}return t},goToSlide:function(r){if(b.type(r)=="number"){var s=r;if(s<0){s=0}else{if(s>i.totalSlideSize){s=i.totalSlideSize}}o(s)}},setContainSize:function(){if(e.direction=="horizontal"){n.removeClass(e.lastItemClass).last().addClass(e.lastItemClass);var r=[];n.each(function(s,t){r.push(b(this).outerWidth(true))});i.totalSize=i.add.apply(null,r);k.css({width:i.totalSize})}else{n.removeClass(e.lastItemClass).last().addClass(e.lastItemClass);var r=[];n.each(function(s,t){r.push(b(this).outerHeight(true))});i.totalSize=i.add.apply(null,r);k.css({height:i.totalSize})}},bindEvent:function(){l.off(e.mosueType+".scrollAreaPrev").on(e.mosueType+".scrollAreaPrev",e.btnPrev,function(){if(!b(this).hasClass(e.disabledClass)){o("--")}});l.off(e.mosueType+".scrollAreaNext").on(e.mosueType+".scrollAreaNext",e.btnNext,function(){if(!b(this).hasClass(e.disabledClass)){o("++")}});l.off(e.mosueType+".scrollAreaItem").on(e.mosueType+".scrollAreaItem",e.slideItem,function(){var r=b(this).index();if(r==i.activeIndex){return false}else{o(r)}})},getVersion:function(){try{console.log("版本号："+f.version);console.log("作者："+f.author)}catch(r){}},update:function(r,s){g();i.currentScrollIndex=0;i.scrollDistancePrev=0;i.clientSize=(e.direction=="horizontal")?j.innerWidth():j.innerHeight();i.totalSlideSize=n.size();i.setContainSize();i.activeIndex=(b.type(r)=="number"&&r>=0&&r<i.totalSlideSize)?r:i.activeIndex>i.totalSlideSize?0:i.activeIndex;o(i.activeIndex);if(b.type(s)=="function"){s(n.eq(i.activeIndex))}}};i.init();f["scope"+m]=i});return f}}(jQuery,window);
